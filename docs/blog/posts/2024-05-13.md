---
date: 2024-05-06
---

## 오늘의 계획

- 7일날 찾아두었던 state 를 갱신하는 뤂프를, unittest 할 수 있는지 확인하자.

## 해봤다!

심플하게- 된다!

BackgroundTask 와는 다르게 uvicorn 도움 따위 필요없다.

## 그럼 뭐가 달라지는데?

- 회사에서 쓰는 supervisord-Ofelia-CeleryTask 라는 고작 로그 파일 쌓인걸 지우기 위해 하는 것 치고는 너무 과하게 복잡한 부분을 지워버릴 수 있다!
- 회사에서 쓰는 BackgroundTask 로 state 머신 만들어서 작업 종료 시키기... 부분을 개선 할 수 있다. 현재 tick 으로 livenessProbe 에 의존하는 괴상한 모양인데, 그럴 필요 없다!

## 조금만 더?

- _core 디렉토리로 지금까지 알아낸 구조를 옮겨넣자.

너무 욕심냈다. 늦게 잠들기 전에 그만 둠.

어느 정도 말이 되는 방법인것 같다는 느낌을 받았음.